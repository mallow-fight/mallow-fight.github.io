

<!DOCTYPE html>
<html lang="en">
<head>
  <title>js - mallow</title>
  <meta charset="utf-8">
  <meta name="description" content="mallow's blog.">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

  <meta property="og:type" content="article">
  <meta property="og:title" content="js — mallow">
  <meta property="og:description" content="mallow's blog.">
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-120215204-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-120215204-1');
  </script>
  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
  <link rel="icon" href="/images/logo.png" type="image/png">
  <!-- main page styles -->
  <link rel="stylesheet" href="/css/page.css">
  <!-- import vue from there so that you can use vue in markdown -->
  <script src="/js/vue.min.js"></script>
  <script>window.PAGE_TYPE = "v3/client"</script>
</head>
<body class="docs">
  <div id="mobile-bar" >
    <a class="menu-button"></a>
    <a class="logo" href="/"></a>
  </div>
  <div id="header">
  <a id="logo" href="/">
    <img src="/images/logo.png">
    <span>Mallow</span>
  </a>
  <ul id="nav">
    <li>
  <form id="search-form">
    <input type="text" id="search-query-nav" class="search-query st-default-search-input">
  </form>
</li>
<li class="nav-dropdown-container learn">
  <a href="/v3/client/index.html" class="nav-link">客户端</a>
</li>

<li class="nav-dropdown-container learn">
  <a href="/v3/http/index.html" class="nav-link">HTTP</a>
</li>

<li class="nav-dropdown-container learn">
  <a href="/v3/server/index.html" class="nav-link">服务端</a>
</li>

<li class="nav-dropdown-container learn">
	<a class="nav-link">v2</a><span class="arrow"></span>
  <ul class="nav-dropdown">
		<li><h4>理论</h4></li>
		<li><ul>
			<li><a href="/v2/theory/dataStructure/1_intro.html" class="nav-link">数据结构</a></li>
			<li><a href="/v2/theory/computerNet/1_intro.html" class="nav-link">计算机网络</a></li>
			<li><a href="/v2/theory/computerContain/1_intro.html" class="nav-link">计算机组成原理</a></li>
			<li><a href="/v2/theory/arithmeticV2/1_intro.html" class="nav-link">算法</a></li>
			<li><a href="/v2/theory/compile/1_intro.html" class="nav-link">编译原理</a></li>
		</ul></li>
		<li><h4>基础</h4></li>
    <li><ul>
			<li><a href="/v2/basic/frontend/1_intro.html" class="nav-link">前端</a></li>
			<li><a href="/v2/basic/http/1_intro.html" class="nav-link">http</a></li>
			<li><a href="/v2/basic/backend/1_intro.html" class="nav-link">后端</a></li>
		</ul></li>
		<li><h4>框架&工具</h4></li>
		<li><ul>
			<li><a href="/v2/frame/react/1_intro.html" class="nav-link">React相关</a></li>
			<li><a href="/v2/theory/vue/1_intro.html" class="nav-link">Vue相关</a></li>
			<li><a href="/v2/theory/lodash/1_intro.html" class="nav-link">Lodash</a></li>
			<li><a href="/v2/theory/axios/1_intro.html" class="nav-link">axios</a></li>
		</ul></li>
		<li><h4>开发环境</h4></li>
		<li><ul>
			<li><a href="/v2/dev/ide/1_intro.html" class="nav-link">IDE</a></li>
			<li><a href="/v2/dev/codeManage/1_intro.html" class="nav-link">代码管理</a></li>
			<li><a href="/v2/dev/packTools/1_intro.html" class="nav-link">打包工具</a></li>
			<li><a href="/v2/dev/staging/1_intro.html" class="nav-link">脚手架</a></li>
			<li><a href="/v2/dev/debug/1_intro.html" class="nav-link">debug</a></li>
			<li><a href="/v2/dev/unitTest/1_intro.html" class="nav-link">单元测试</a></li>
			<li><a href="/v2/dev/deploy/1_intro.html" class="nav-link">构建和部署</a></li>
			<li><a href="/v2/dev/serverOprate/1_intro.html" class="nav-link">服务器操作</a></li>
		</ul></li>
		<li><h4>运行环境</h4></li>
		<li><ul>
			<li><a href="/v2/runtime/browser/1_intro.html" class="nav-link">浏览器</a></li>
			<li><a href="/v2/runtime/app/1_intro.html" class="nav-link">app</a></li>
			<li><a href="/v2/runtime/desktop/1_intro.html" class="nav-link">桌面</a></li>
		</ul></li>
		<li><h4>监控&分析</h4></li>
		<li><ul>
			<li><a href="/v2/monitor/browser/1_intro.html" class="nav-link">浏览器</a></li>
			<li><a href="/v2/monitor/app/1_intro.html" class="nav-link">app</a></li>
			<li><a href="/v2/monitor/desktop/1_intro.html" class="nav-link">桌面</a></li>
		</ul></li>
		<li class="nav-dropdown-container learn">
			<a href="/special/1_原型.html" class="nav-link">专题</a>
		</li>			
  </ul>
</li>

<li class="nav-dropdown-container learn">
  <a class="nav-link">v1</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li><h4>软件工程化</h4></li>
    <li><ul>
      <li><a href="/software/engineering.html" class="nav-link">概念&实践</a></li>
    </ul></li>
    <li><h4>前端</h4></li>
    <li><ul>
      <li><a href="/frontend/skeleton/1_skeleton.html" class="nav-link">skeleton</a></li>
      <li><a href="/frontend/html/1_define.html" class="nav-link">html</a></li>
      <li><a href="/frontend/css/1_define.html" class="nav-link">css</a></li>
      <li><a href="/frontend/js/1_enter&going.html" class="nav-link">javascript</a></li>
      <li><a href="/frontend/framework/1_vue.html" class="nav-link">framework</a></li>
      <li><a href="/frontend/browser/1_safe.html" class="nav-link">browser</a></li>
      <li><a href="/frontend/important/1_conclude.html" class="nav-link">conclude</a></li>
    </ul></li>
    <li><h4>后端</h4></li>
    <li><ul>
      <li><a href="/backend/node/note.html" class="nav-link">node</a></li>
      <li><a href="/backend/http/1_http.html" class="nav-link">http</a></li>
      <li><a href="/backend/java/core.html" class="nav-link">java</a></li>
      <li><a href="/backend/database/1_mysql.html" class="nav-link">database</a></li>
    </ul></li>
    <li><h4>算法</h4></li>
    <li><ul>
      <li><a href="/arithmetic/1_lintcode.html" class="nav-link">概念&实践</a></li>
    </ul></li>
    <li><h4>读书</h4></li>
    <li><ul>
      <li><a href="/books/memory/1_利玛窦的记忆宫殿.html" class="nav-link">记忆学</a></li>
      <li><a href="/books/computer/1_构建高性能web网站.html" class="nav-link">计算机</a></li>
      <li><a href="/books/history/资治通鉴/1_周纪一.html" class="nav-link">历史</a></li>
      <li><a href="/books/economics/1_国富论.html" class="nav-link">经济</a></li>
    </ul></li>
  </ul>
</li>

  </ul>
</div>
  
    <div id="main" class="fix-sidebar">
        <div class="guide-links">
  
  
    <span style="float: right;"><a style="color: green;" href="/v3/client/4-browser.html">浏览器</a> →</span>
  
  
  
    <span style="float: right; margin-right: 30px;">← <a style="color: goldenrod;" href="/v3/client/2-css.html">css</a></span>
  
</div>

  <div class="sidebar">
  <div class="sidebar-inner">
    <h3>当前位置：v3/client</h3>
    <div class="list">
      <ul class="menu-root">
  
    
      <li>
        <a href="/v3/client/index.html" class="sidebar-link">
          介绍
        </a>
      </li>
      
    
      <li>
        <a href="/v3/client/1-html.html" class="sidebar-link">
          html
        </a>
      </li>
      
    
      <li>
        <a href="/v3/client/2-css.html" class="sidebar-link">
          css
        </a>
      </li>
      
    
      <li>
        <a href="/v3/client/3-js.html" class="sidebar-link current">
          js
        </a>
      </li>
      
    
      <li>
        <a href="/v3/client/4-browser.html" class="sidebar-link">
          浏览器
        </a>
      </li>
      
    
      <li>
        <a href="/v3/client/5-webpack.html" class="sidebar-link">
          webpack
        </a>
      </li>
      
    
      <li>
        <a href="/v3/client/6-react.html" class="sidebar-link">
          react
        </a>
      </li>
      
</ul>
    </div>
    <h3>浏览其它</h3>
    <ul class="main-menu">
      <li>
  <form id="search-form">
    <input type="text" id="search-query-sidebar" class="search-query st-default-search-input">
  </form>
</li>
<li class="nav-dropdown-container learn">
  <a href="/v3/client/index.html" class="nav-link">客户端</a>
</li>

<li class="nav-dropdown-container learn">
  <a href="/v3/http/index.html" class="nav-link">HTTP</a>
</li>

<li class="nav-dropdown-container learn">
  <a href="/v3/server/index.html" class="nav-link">服务端</a>
</li>

<li class="nav-dropdown-container learn">
	<a class="nav-link">v2</a><span class="arrow"></span>
  <ul class="nav-dropdown">
		<li><h4>理论</h4></li>
		<li><ul>
			<li><a href="/v2/theory/dataStructure/1_intro.html" class="nav-link">数据结构</a></li>
			<li><a href="/v2/theory/computerNet/1_intro.html" class="nav-link">计算机网络</a></li>
			<li><a href="/v2/theory/computerContain/1_intro.html" class="nav-link">计算机组成原理</a></li>
			<li><a href="/v2/theory/arithmeticV2/1_intro.html" class="nav-link">算法</a></li>
			<li><a href="/v2/theory/compile/1_intro.html" class="nav-link">编译原理</a></li>
		</ul></li>
		<li><h4>基础</h4></li>
    <li><ul>
			<li><a href="/v2/basic/frontend/1_intro.html" class="nav-link">前端</a></li>
			<li><a href="/v2/basic/http/1_intro.html" class="nav-link">http</a></li>
			<li><a href="/v2/basic/backend/1_intro.html" class="nav-link">后端</a></li>
		</ul></li>
		<li><h4>框架&工具</h4></li>
		<li><ul>
			<li><a href="/v2/frame/react/1_intro.html" class="nav-link">React相关</a></li>
			<li><a href="/v2/theory/vue/1_intro.html" class="nav-link">Vue相关</a></li>
			<li><a href="/v2/theory/lodash/1_intro.html" class="nav-link">Lodash</a></li>
			<li><a href="/v2/theory/axios/1_intro.html" class="nav-link">axios</a></li>
		</ul></li>
		<li><h4>开发环境</h4></li>
		<li><ul>
			<li><a href="/v2/dev/ide/1_intro.html" class="nav-link">IDE</a></li>
			<li><a href="/v2/dev/codeManage/1_intro.html" class="nav-link">代码管理</a></li>
			<li><a href="/v2/dev/packTools/1_intro.html" class="nav-link">打包工具</a></li>
			<li><a href="/v2/dev/staging/1_intro.html" class="nav-link">脚手架</a></li>
			<li><a href="/v2/dev/debug/1_intro.html" class="nav-link">debug</a></li>
			<li><a href="/v2/dev/unitTest/1_intro.html" class="nav-link">单元测试</a></li>
			<li><a href="/v2/dev/deploy/1_intro.html" class="nav-link">构建和部署</a></li>
			<li><a href="/v2/dev/serverOprate/1_intro.html" class="nav-link">服务器操作</a></li>
		</ul></li>
		<li><h4>运行环境</h4></li>
		<li><ul>
			<li><a href="/v2/runtime/browser/1_intro.html" class="nav-link">浏览器</a></li>
			<li><a href="/v2/runtime/app/1_intro.html" class="nav-link">app</a></li>
			<li><a href="/v2/runtime/desktop/1_intro.html" class="nav-link">桌面</a></li>
		</ul></li>
		<li><h4>监控&分析</h4></li>
		<li><ul>
			<li><a href="/v2/monitor/browser/1_intro.html" class="nav-link">浏览器</a></li>
			<li><a href="/v2/monitor/app/1_intro.html" class="nav-link">app</a></li>
			<li><a href="/v2/monitor/desktop/1_intro.html" class="nav-link">桌面</a></li>
		</ul></li>
		<li class="nav-dropdown-container learn">
			<a href="/special/1_原型.html" class="nav-link">专题</a>
		</li>			
  </ul>
</li>

<li class="nav-dropdown-container learn">
  <a class="nav-link">v1</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li><h4>软件工程化</h4></li>
    <li><ul>
      <li><a href="/software/engineering.html" class="nav-link">概念&实践</a></li>
    </ul></li>
    <li><h4>前端</h4></li>
    <li><ul>
      <li><a href="/frontend/skeleton/1_skeleton.html" class="nav-link">skeleton</a></li>
      <li><a href="/frontend/html/1_define.html" class="nav-link">html</a></li>
      <li><a href="/frontend/css/1_define.html" class="nav-link">css</a></li>
      <li><a href="/frontend/js/1_enter&going.html" class="nav-link">javascript</a></li>
      <li><a href="/frontend/framework/1_vue.html" class="nav-link">framework</a></li>
      <li><a href="/frontend/browser/1_safe.html" class="nav-link">browser</a></li>
      <li><a href="/frontend/important/1_conclude.html" class="nav-link">conclude</a></li>
    </ul></li>
    <li><h4>后端</h4></li>
    <li><ul>
      <li><a href="/backend/node/note.html" class="nav-link">node</a></li>
      <li><a href="/backend/http/1_http.html" class="nav-link">http</a></li>
      <li><a href="/backend/java/core.html" class="nav-link">java</a></li>
      <li><a href="/backend/database/1_mysql.html" class="nav-link">database</a></li>
    </ul></li>
    <li><h4>算法</h4></li>
    <li><ul>
      <li><a href="/arithmetic/1_lintcode.html" class="nav-link">概念&实践</a></li>
    </ul></li>
    <li><h4>读书</h4></li>
    <li><ul>
      <li><a href="/books/memory/1_利玛窦的记忆宫殿.html" class="nav-link">记忆学</a></li>
      <li><a href="/books/computer/1_构建高性能web网站.html" class="nav-link">计算机</a></li>
      <li><a href="/books/history/资治通鉴/1_周纪一.html" class="nav-link">历史</a></li>
      <li><a href="/books/economics/1_国富论.html" class="nav-link">经济</a></li>
    </ul></li>
  </ul>
</li>

    </ul>
  </div>
</div>


<div class="content v3/client with-sidebar ">
  <ul class="menu-root">
  
</ul>
  
    <h1>js</h1>
  
  <blockquote>
<p><a href="https://github.com/yygmind/blog/issues/13" target="_blank" rel="noopener">进阶</a></p>
</blockquote>
<h2 id="原型链"><a href="#原型链" class="headerlink" title="原型链"></a>原型链</h2><h3 id="prototype"><a href="#prototype" class="headerlink" title="prototype"></a>prototype</h3><h4 id="表现行为"><a href="#表现行为" class="headerlink" title="表现行为"></a>表现行为</h4><ol>
<li>每个普通函数都有一个<code>prototype</code>属性。</li>
<li><code>es6</code>的箭头函数没有<code>prototype</code>属性。</li>
<li><code>prototype</code>是一个对象，默认有一个<code>constructor</code>属性，这个属性值等同于函数本身，对<code>constructor</code>的操作相当于对函数本身进行操作。</li>
</ol>
<h5 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Foo</span>(<span class="params"></span>) </span>&#123; &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 默认的prototype是一个对象，默认有一个constructor属性</span></span><br><span class="line">Foo.prototype <span class="comment">// &#123;constructor: f&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// constructor默认等于构造函数本身，所以Foo和Foo.prototype.constructor表现形式一样，都有name、caller、length、arguments等属性</span></span><br><span class="line">Foo.prototype.constructor === Foo <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 可以为prototype添加一些属性</span></span><br><span class="line">Foo.prototype.test = <span class="string">'peter'</span></span><br><span class="line">Foo.prototype <span class="comment">// &#123;test: 'peter', constructor: f&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 同样可以通过constructor为添加和修改属性</span></span><br><span class="line">Foo.prototype.constructor.prototype.test1 = <span class="string">'mallow'</span></span><br><span class="line">Foo.prototype.constructor.prototype.test = <span class="string">'lucy'</span></span><br><span class="line">Foo.prototype <span class="comment">// &#123;test: 'lucy', test1: 'mallow', constructor: f&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 所以说Foo和Foo.prototype.constructor是全等的，保存的都是同一个对象索引，所以只需要继续对Foo.prototype研究就行了</span></span><br><span class="line"><span class="comment">// 因为Foo.prototype是一个对象，所以它是没有prototype的，到此结束，这就是普通函数的所有prototype结构</span></span><br><span class="line">Foo.prototype.prototype <span class="comment">// undefined</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 注意：es6的箭头函数没有prototype，所以这也导致了它没有constructor，继而不能作为构造函数</span></span><br><span class="line"><span class="keyword">const</span> baz = <span class="function"><span class="params">()</span> =&gt;</span> &#123;&#125;</span><br><span class="line">baz.prototype <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure>
<h4 id="Q-amp-A"><a href="#Q-amp-A" class="headerlink" title="Q&amp;A"></a>Q&amp;A</h4><ul>
<li><p>为什么普通函数有<code>prototype</code>属性而箭头函数没有？</p>
<ul>
<li>这得上升到浏览器层面，箭头函数和普通函数的实现不一样</li>
<li>流行的babel翻译箭头函数也只是作为一个普通函数而已，可以看出浏览器还没有完全实现箭头函数</li>
</ul>
</li>
<li><p>普通函数和箭头函数的差异？</p>
<ul>
<li>不绑定<code>this</code>，通过<code>call</code>、<code>apply</code>只会传递参数，第一个绑定<code>this</code>的参数会被忽略</li>
<li>不绑定<code>arguments</code></li>
<li>不能用作构造器，不能使用<code>new</code></li>
<li>没有<code>prototype</code>属性</li>
<li>不能用作生成器，即<code>yield</code>关键字不能在箭头函数中使用</li>
<li>递归，<code>a =&gt; b =&gt; c</code></li>
</ul>
</li>
</ul>
<h3 id="proto"><a href="#proto" class="headerlink" title="__proto__"></a><code>__proto__</code></h3><h4 id="表现行为-1"><a href="#表现行为-1" class="headerlink" title="表现行为"></a>表现行为</h4><ol>
<li>除了<code>null</code>和<code>undefined</code>，其他基本类型和引用类型都有<code>__proto__</code>属性。</li>
<li>相当于继承了某个构造函数的<code>prototype</code></li>
</ol>
<h4 id="示例-1"><a href="#示例-1" class="headerlink" title="示例"></a>示例</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 从下面的例子可以看出，不管是什么样的对象，最终肯定都继承自`null`。</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Foo</span>(<span class="params">a</span>) </span>&#123; <span class="keyword">this</span>.a = a &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 首先我们看看Foo的__proto__，显示是一个对象</span></span><br><span class="line">Foo.__proto__ <span class="comment">// ƒ () &#123; [native code] &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 可以看到，Foo也是一个对象，继承了名为Function的构造函数的原型</span></span><br><span class="line">Foo.__proto__ === <span class="built_in">Function</span>.prototype <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 所以说修改Foo.__proto__就相当于修改Function.prototype，这样就会影响Function构造函数，继而影响所有实例函数，这样是很危险的</span></span><br><span class="line"><span class="comment">// 这也是为什么禁止直接修改__proto__的原因</span></span><br><span class="line">Foo.__proto__.a = <span class="number">1</span></span><br><span class="line">Foo.prototype <span class="comment">// &#123; a: 1, ... &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Function.prototype.constructor就是Function本身，跟prototype表现行为一致</span></span><br><span class="line"><span class="built_in">Function</span>.prototype.constructor <span class="comment">// ƒ Function() &#123; [native code] &#125;</span></span><br><span class="line"><span class="built_in">Function</span>.prototype.constructor === <span class="built_in">Function</span> <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 所以说因为Function.prototype是一个对象，所以它也继承了Object构造函数的prototype</span></span><br><span class="line"><span class="comment">// 这个地方有点混淆，其实Function.prototype就是一个普通的object</span></span><br><span class="line"><span class="built_in">Function</span>.prototype.__proto__ === <span class="built_in">Object</span>.prototype</span><br><span class="line"><span class="built_in">Function</span>.prototype.__proto__ === <span class="keyword">new</span> <span class="built_in">Object</span>().__proto__</span><br><span class="line"></span><br><span class="line"><span class="comment">// 注意不能这样访问</span></span><br><span class="line">&#123;&#125;.__proto__</span><br><span class="line"><span class="comment">// 可以这样访问</span></span><br><span class="line"><span class="keyword">const</span> a = &#123;&#125;;</span><br><span class="line">a.__proto__;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ok 到此为止，问题都转化为了关于Object构造函数的问题</span></span><br><span class="line"></span><br><span class="line">Foo.prototype._a = <span class="string">'this is _a'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 首先创造一个Foo的实例，Foo函数中调用this会将属性挂载在实例对象上，而prototype中的属性会挂载在__proto__对象上</span></span><br><span class="line"><span class="keyword">const</span> foo = <span class="keyword">new</span> Foo(<span class="string">'this is a'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//可以看到创造的实例是这样子的，包括创建过程中赋值给实例对象和一个__proto__属性</span></span><br><span class="line">foo <span class="comment">// &#123;a: 'this is a', __proto__: &#123;_a: 'this is _a', constructor: ƒ Foo, __proto__: Object&#125;&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 继续往下看，foo.__proto__没什么好解释，可以看到foo.__proto__还有一个__proto__属性</span></span><br><span class="line"><span class="comment">// 下面这行代码说明，foo.__proto__只是一个普通的对象，是由Object函数构造的，所以它继承了Object.prototype的属性</span></span><br><span class="line">foo.__proto__.__proto__ === <span class="built_in">Object</span>.prototype <span class="comment">// true</span></span><br><span class="line"><span class="comment">// 所以可以得到如下结果，所有的对象都继承了Object构造函数的prototype，Object只是一个构造函数，没什么好神秘的</span></span><br><span class="line">foo.__proto__.__proto__ === <span class="keyword">new</span> <span class="built_in">Object</span>(&#123;&#125;).__proto__ <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 可以看到，Object只是一个构造函数</span></span><br><span class="line"><span class="built_in">Object</span> <span class="comment">// ƒ Object() &#123; [native code] &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ok，既然Object是一个构造函数，那它肯定有一个prototype属性，具有constructor和一些内置属性</span></span><br><span class="line"><span class="built_in">Object</span>.prototype <span class="comment">// &#123;constructor: ƒ Object(), hasOwnProperty, ....&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 不解释</span></span><br><span class="line"><span class="built_in">Object</span>.prototype.constructor === <span class="built_in">Object</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 天地无常，万法归null</span></span><br><span class="line"><span class="built_in">Object</span>.prototype.__proto__ === <span class="literal">null</span></span><br></pre></td></tr></table></figure>
<h4 id="Q-amp-A-1"><a href="#Q-amp-A-1" class="headerlink" title="Q&amp;A"></a>Q&amp;A</h4><ul>
<li><p>为什么<code>null</code>和<code>undefined</code>没有<code>__proto__</code>属性</p>
<ul>
<li>因为<code>Booleand</code>、<code>Strings</code>和<code>Numbers</code>都有对应的构造函数，当你试图去访问这些基本类型的属性时，它们会被自动转换成一个对象值</li>
<li>但是<code>undefined</code>和<code>null</code>，没有这样的构造函数，所以访问<code>__proto__</code>就会报错</li>
</ul>
</li>
<li><p>各种对象的<code>__proto__</code>属性中每个属性代表什么含义、有什么作用</p>
<ul>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects" target="_blank" rel="noopener">标准内置对象</a></li>
</ul>
</li>
<li><code>null</code>和<code>undefined</code>有什么区别<ul>
<li>没什么区别，历史遗留问题，有些语义化区别</li>
<li>使用<code>typeof</code>结果不一样，<code>null</code>是<code>object</code>，<code>undefined</code>是<code>undefined</code></li>
</ul>
</li>
<li><code>{}.__proto__</code>为什么不能这样访问<ul>
<li>语法错误，可以这样<code>{}[&#39;__proto__&#39;]</code></li>
</ul>
</li>
</ul>
<h3 id="constructor-NaN"><a href="#constructor-NaN" class="headerlink" title="constructor"></a>constructor</h3><ol>
<li>理解了<code>prototype</code>和<code>__proto__</code>，这个就不难理解了，<code>constructor</code>只会出现在<code>__proto__</code>和<code>prototype</code>对象中</li>
<li>在<code>__proto__</code>中，指代的是这个对象是由什么函数构造的，指向构造它的函数，不管是<code>Foo</code>也好，内置的<code>Object</code>也好</li>
<li>在<code>prototype</code>中，指代的就是构造函数本身</li>
</ol>
<h3 id="new"><a href="#new" class="headerlink" title="new"></a>new</h3><ul>
<li>用来实例化一个类，从而在内存中分配一个实例对象</li>
</ul>
<h4 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = name;</span><br><span class="line">&#125;</span><br><span class="line">Person.hairColor = <span class="string">'black'</span>;</span><br><span class="line">Person.prototype.say = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'my name is '</span> + <span class="keyword">this</span>.name);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> john = <span class="keyword">new</span> Person(<span class="string">'john'</span>);</span><br><span class="line">john.name <span class="comment">// John</span></span><br><span class="line">john.hairColor <span class="comment">// undefined</span></span><br><span class="line">john.height <span class="comment">// undefined</span></span><br><span class="line">john.say() <span class="comment">// my name is john</span></span><br><span class="line">Person.name <span class="comment">// Person</span></span><br><span class="line">Person.hairColor <span class="comment">// black</span></span><br><span class="line">Person.say() <span class="comment">// Person.say is not a function</span></span><br></pre></td></tr></table></figure>
<h4 id="伪代码模拟过程"><a href="#伪代码模拟过程" class="headerlink" title="伪代码模拟过程"></a>伪代码模拟过程</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;&#125;;</span><br><span class="line">obj.__proto__ = Person.prototype; <span class="comment">// 此时建立了obj对象的原型链</span></span><br><span class="line"><span class="comment">// obj -&gt; Person.prototype -&gt; Object.prototype -&gt; null</span></span><br><span class="line"><span class="keyword">var</span> result = Person.call(obj, <span class="string">'John'</span>); <span class="comment">// 相当于obj.Person('John')</span></span><br><span class="line"><span class="keyword">return</span> <span class="keyword">typeof</span> result === <span class="string">'object'</span> ? result : obj; <span class="comment">// 如果无返回值或者返回一个非对象值，则将obj返回作为新对象</span></span><br></pre></td></tr></table></figure>
<h4 id="Q-amp-A-2"><a href="#Q-amp-A-2" class="headerlink" title="Q&amp;A"></a>Q&amp;A</h4><ul>
<li>直接返回对象和不返回对象的区别？<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 直接返回对象产生的实例的`__proto__`的`constructor`是`Object`。</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> &#123; <span class="attr">a</span>: <span class="number">1</span> &#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> foo = <span class="keyword">new</span> Foo();</span><br><span class="line">foo <span class="comment">// &#123;a: 1, __proto__: &#123; constructor: Object &#125;&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 不返回对象产生的实例的`__proto__`的`constructor`是构造函数本身。</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Baz</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.a = <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> baz = <span class="keyword">new</span> Baz();</span><br><span class="line">baz <span class="comment">// &#123;a: 1, __proto__: &#123; constructor: Baz &#125;&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Cab</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.a = <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line">Cab.prototype.a = <span class="number">2</span>;</span><br><span class="line"><span class="keyword">const</span> cab = <span class="keyword">new</span> Cab();</span><br><span class="line">cab <span class="comment">// &#123;a: 1, __proto__: &#123; a: 2, constructor: Baz &#125;&#125;</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="继承"><a href="#继承" class="headerlink" title="继承"></a>继承</h2><h3 id="基于prototype"><a href="#基于prototype" class="headerlink" title="基于prototype"></a>基于prototype</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line">Foo.prototype.name = <span class="string">'i am foo'</span>;</span><br><span class="line"><span class="keyword">const</span> foo = <span class="keyword">new</span> Foo();</span><br><span class="line"><span class="built_in">console</span>.log(foo.name); <span class="comment">// i am foo</span></span><br></pre></td></tr></table></figure>
<h3 id="基于-proto"><a href="#基于-proto" class="headerlink" title="基于__proto__"></a>基于<code>__proto__</code></h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> parent = &#123;</span><br><span class="line">  a: <span class="number">1</span>,</span><br><span class="line">  b: <span class="number">2</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> kid = <span class="built_in">Object</span>.create(parent);</span><br><span class="line"><span class="built_in">console</span>.log(kid) <span class="comment">// &#123; __proto__: &#123; a: 1, b: 2 &#125; &#125;</span></span><br></pre></td></tr></table></figure>
<h3 id="Object-create"><a href="#Object-create" class="headerlink" title="Object.create"></a>Object.create</h3><h4 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">create</span>(<span class="params">proto</span>) </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">  foo.prototype = proto;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> foo();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="参数"><a href="#参数" class="headerlink" title="参数"></a>参数</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.create(proto, [propertiesObject])</span><br></pre></td></tr></table></figure>
<ol>
<li>proto：新创建对象的原型对象。</li>
<li>propertiesObject：可选。如果没有指定为 undefined，则是要添加到新创建对象的可枚举属性（即其自身定义的属性，而不是其原型链上的枚举属性）对象的属性描述符以及相应的属性名称。这些属性对应Object.defineProperties()的第二个参数。</li>
</ol>
<h3 id="class"><a href="#class" class="headerlink" title="class"></a>class</h3><h4 id="constructor"><a href="#constructor" class="headerlink" title="constructor"></a>constructor</h4><ol>
<li>相当于普通函数体内执行的代码块。</li>
<li>可以使用super来调用一个父类的构造方法。</li>
<li>如果不指定一个constructor，则会使用一个默认的constructor。</li>
<li>在派生类（即有继承其他类的类），必须先调用super()才能使用this，注意：如果有参数，super需要传入参数。</li>
</ol>
<h4 id="原型方法"><a href="#原型方法" class="headerlink" title="原型方法"></a>原型方法</h4><ol>
<li>定义在类的prototype上的方法，可以被实例继承。</li>
</ol>
<h4 id="静态方法"><a href="#静态方法" class="headerlink" title="静态方法"></a>静态方法</h4><ol>
<li>定义在类上的静态方法，不可以被实例继承（因为不在prototype上），可以通过类直接访问，就相当于在函数上直接定义了一个对象。</li>
<li>因为普通函数是Function构造出来的，所以就是一对象，继而可以在上面定义静态方法。</li>
</ol>
<h4 id="Q-amp-A-3"><a href="#Q-amp-A-3" class="headerlink" title="Q&amp;A"></a>Q&amp;A</h4><ul>
<li>不指定constructor会发生什么，为什么必须先调用super？<ul>
<li>不指定constructor会调用默认的constructor，返回类的实例。</li>
<li>先调用super是因为防止你在子类中访问了父类的属性，以及更好的控制传入父类的参数。</li>
</ul>
</li>
</ul>
<h2 id="Set-amp-Map"><a href="#Set-amp-Map" class="headerlink" title="Set&amp;Map"></a>Set&amp;Map</h2><h3 id="Set"><a href="#Set" class="headerlink" title="Set"></a>Set</h3><h4 id="去重"><a href="#去重" class="headerlink" title="去重"></a>去重</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> s = <span class="keyword">new</span> <span class="built_in">Set</span>();</span><br><span class="line">[<span class="number">2</span>, <span class="number">333</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>].forEach(<span class="function"><span class="params">item</span> =&gt;</span> s.add(item))</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> item <span class="keyword">of</span> s) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(item)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 2, 333, 3, 1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 去重数组</span></span><br><span class="line">[...new <span class="built_in">Set</span>(array)];</span><br><span class="line"><span class="built_in">Array</span>.from(<span class="keyword">new</span> <span class="built_in">Set</span>(array));</span><br><span class="line"></span><br><span class="line"><span class="comment">// 去重字符串</span></span><br><span class="line">[...new <span class="built_in">Set</span>(<span class="string">'ababbc'</span>).join(<span class="string">''</span>)]</span><br></pre></td></tr></table></figure>
<h4 id="prototype-1"><a href="#prototype-1" class="headerlink" title="prototype"></a>prototype</h4><ul>
<li>add：添加元素</li>
<li>has：是否有该项元素</li>
<li>clear：清空集合</li>
<li>delete：删除某个元素</li>
<li>entries：用来访问实例，Set的键和值相同</li>
<li>forEach：用来遍历实例</li>
<li>keys：访问实例key</li>
<li>size：集合大小</li>
<li>values：访问实例值</li>
</ul>
<h3 id="WeakSet"><a href="#WeakSet" class="headerlink" title="WeakSet"></a>WeakSet</h3><ul>
<li>类似Set，只能存放对象</li>
</ul>
<h3 id="Map"><a href="#Map" class="headerlink" title="Map"></a>Map</h3><ul>
<li>类似于对象，也是键值对的集合，但是键的范围不限于字符串，各种类型的值都可以当作键。</li>
<li><code>Object</code>提供了字符串-值的对应，而<code>Map</code>提供了值-值的对应，是一种更完善的<code>Hash</code>结构实现。</li>
</ul>
<h3 id="WeakMap"><a href="#WeakMap" class="headerlink" title="WeakMap"></a>WeakMap</h3><ul>
<li>只接受对象作为键名（null除外），不接受其他类型的值作为键名。</li>
</ul>
<h2 id="Reflect"><a href="#Reflect" class="headerlink" title="Reflect"></a>Reflect</h2><ul>
<li>将Object对象的一些明显属于语言内部的方法（比如Object.defineProperty），放到Reflect对象上。现阶段，某些方法同时在Object和Reflect对象上部署，未来的新方法将只部署在Reflect对象上。也就是说，从Reflect对象上可以拿到语言内部的方法。</li>
<li>修改某些Object方法的返回结果，让其变得更合理。比如，Object.defineProperty(obj, name, desc)在无法定义属性时，会抛出一个错误，而Reflect.defineProperty(obj, name, desc)则会返回false。</li>
</ul>
<h3 id="get-target-name-receiver"><a href="#get-target-name-receiver" class="headerlink" title="get(target, name, receiver)"></a>get(target, name, receiver)</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> test = &#123;</span><br><span class="line">  a: <span class="number">1</span>,</span><br><span class="line">  b: <span class="number">2</span>,</span><br><span class="line">  get c() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.a + <span class="keyword">this</span>.b</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">Reflect</span>.get(test, <span class="string">'a'</span>) <span class="comment">// 1</span></span><br><span class="line"><span class="built_in">Reflect</span>.get(test, <span class="string">'b'</span>) <span class="comment">// 2</span></span><br><span class="line"><span class="built_in">Reflect</span>.get(test, <span class="string">'c'</span>) <span class="comment">// 3</span></span><br><span class="line">test.c <span class="comment">// 3</span></span><br><span class="line"><span class="comment">// 第三个参数是调用上下文</span></span><br><span class="line"><span class="built_in">Reflect</span>.get(test, <span class="string">'c'</span>, &#123;<span class="attr">a</span>: <span class="number">4</span>, <span class="attr">b</span>: <span class="number">4</span>&#125;) <span class="comment">// 8</span></span><br><span class="line"><span class="built_in">Reflect</span>.get(test, <span class="string">'c'</span>, &#123;<span class="attr">a</span>: <span class="number">4</span>&#125;) <span class="comment">// NaN</span></span><br></pre></td></tr></table></figure>
<h3 id="set-target-name-value-receiver"><a href="#set-target-name-value-receiver" class="headerlink" title="set(target, name, value, receiver)"></a>set(target, name, value, receiver)</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> test = &#123;</span><br><span class="line">  a: <span class="number">1</span>,</span><br><span class="line">  b: <span class="number">2</span>,</span><br><span class="line">  get c() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.a + <span class="keyword">this</span>.b</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">Reflect</span>.set(test, <span class="string">'d'</span>, <span class="number">3</span>)</span><br><span class="line"><span class="built_in">console</span>.log(test) <span class="comment">// &#123; a: 1, b: 2, c: [Getter], d: 3 &#125;</span></span><br><span class="line"><span class="built_in">Reflect</span>.set(test, <span class="string">'e'</span>, <span class="number">4</span>, &#123;<span class="attr">a</span>: <span class="number">4</span>, <span class="attr">b</span>: <span class="number">4</span>&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(test) <span class="comment">// &#123; a: 1, b: 2, c: [Getter], d: 3 &#125;</span></span><br><span class="line"><span class="built_in">Reflect</span>.set(test, <span class="string">'e'</span>, <span class="number">4</span>)</span><br><span class="line"><span class="built_in">console</span>.log(test) <span class="comment">// &#123; a: 1, b: 2, c: [Getter], d: 3, e: 4 &#125;</span></span><br></pre></td></tr></table></figure>
<h3 id="has-obj-name"><a href="#has-obj-name" class="headerlink" title="has(obj, name)"></a>has(obj, name)</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> test = &#123;</span><br><span class="line">  a: <span class="number">1</span>,</span><br><span class="line">  b: <span class="number">2</span>,</span><br><span class="line">  get c() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.a + <span class="keyword">this</span>.b</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Reflect</span>.get(test, <span class="string">'a'</span>)) <span class="comment">// 1</span></span><br></pre></td></tr></table></figure>
<h3 id="deleteProperty-obj-name"><a href="#deleteProperty-obj-name" class="headerlink" title="deleteProperty(obj, name)"></a>deleteProperty(obj, name)</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 等同于delete obj[name]，用于删除对象的属性</span></span><br><span class="line"><span class="keyword">const</span> test = &#123;</span><br><span class="line">  a: <span class="number">1</span>,</span><br><span class="line">  b: <span class="number">2</span>,</span><br><span class="line">  get c() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.a + <span class="keyword">this</span>.b</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">Reflect</span>.deleteProperty(test, <span class="string">'a'</span>)</span><br><span class="line"><span class="built_in">console</span>.log(test) <span class="comment">// &#123; b: 2, c: [Getter] &#125;</span></span><br></pre></td></tr></table></figure>
<h3 id="construct-target-array-args"><a href="#construct-target-array-args" class="headerlink" title="construct(target, [array]args)"></a>construct(target, [array]args)</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 等同于 new target(...args)</span></span><br><span class="line"><span class="keyword">const</span> instance = <span class="built_in">Reflect</span>.construct(foo, [<span class="string">'mallow'</span>])</span><br><span class="line"><span class="built_in">console</span>.log(instance) <span class="comment">// foo &#123; name: 'mallow' &#125;</span></span><br></pre></td></tr></table></figure>
<h3 id="getPrototypeOf-obj"><a href="#getPrototypeOf-obj" class="headerlink" title="getPrototypeOf(obj)"></a>getPrototypeOf(obj)</h3><ul>
<li>这个获取的是对象的<code>__proto__</code>属性。</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> test = &#123;</span><br><span class="line">  a: <span class="number">1</span>,</span><br><span class="line">  b: <span class="number">2</span>,</span><br><span class="line">  get c() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.a + <span class="keyword">this</span>.b</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Reflect</span>.getPrototypeOf(test)) <span class="comment">// 同Object.prototype</span></span><br></pre></td></tr></table></figure>
<h3 id="setPrototypeOf-obj-newProto"><a href="#setPrototypeOf-obj-newProto" class="headerlink" title="setPrototypeOf(obj, newProto)"></a>setPrototypeOf(obj, newProto)</h3><ul>
<li>这个设置的是对象的<code>__proto__</code>上的属性，所以node环境中有可能打印不出来。</li>
<li>这个东西会带来性能负担，最好不要使用它，可以使用Object.create来替代。<blockquote>
<p>警告: 由于现代 JavaScript 引擎优化属性访问所带来的特性的关系，更改对象的 [[Prototype]]在各个浏览器和 JavaScript 引擎上都是一个很慢的操作。其在更改继承的性能上的影响是微妙而又广泛的，这不仅仅限于 obj.<strong>proto</strong> = … 语句上的时间花费，而且可能会延伸到任何代码，那些可以访问任何[[Prototype]]已被更改的对象的代码。如果你关心性能，你应该避免设置一个对象的 [[Prototype]]。相反，你应该使用 Object.create()来创建带有你想要的[[Prototype]]的新对象。</p>
</blockquote>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> test = &#123;</span><br><span class="line">  a: <span class="number">1</span>,</span><br><span class="line">  b: <span class="number">2</span>,</span><br><span class="line">  get c() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.a + <span class="keyword">this</span>.b</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">Reflect</span>.setPrototypeOf(test, &#123;</span><br><span class="line">  d: <span class="number">1</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(test.d) <span class="comment">// 1</span></span><br></pre></td></tr></table></figure>
<h3 id="apply-func-context-args-arrayLike"><a href="#apply-func-context-args-arrayLike" class="headerlink" title="apply(func, context, args[arrayLike])"></a>apply(func, context, args[arrayLike])</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Reflect</span>.apply(<span class="built_in">Object</span>.prototype.toString, &#123;&#125;, [<span class="number">1</span>]) <span class="comment">// [object Object]</span></span><br></pre></td></tr></table></figure>
<h3 id="defineProperty-target-propertyKey-attributes"><a href="#defineProperty-target-propertyKey-attributes" class="headerlink" title="defineProperty(target, propertyKey, attributes)"></a>defineProperty(target, propertyKey, attributes)</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> o = &#123;&#125;;</span><br><span class="line"><span class="built_in">Reflect</span>.defineProperty(o, <span class="string">'a'</span>, &#123;</span><br><span class="line">  configurable: <span class="literal">true</span>,</span><br><span class="line">  enumerable: <span class="literal">true</span>,</span><br><span class="line">  writable: <span class="literal">true</span>,</span><br><span class="line">  value: <span class="number">1</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">Reflect</span>.defineProperty(o, <span class="string">'b'</span>, &#123;</span><br><span class="line">  configurable: <span class="literal">false</span>,</span><br><span class="line">  enumerable: <span class="literal">true</span>,</span><br><span class="line">  writable: <span class="literal">false</span>,</span><br><span class="line">  value: <span class="number">2</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">let</span> cvalue;</span><br><span class="line"><span class="built_in">Reflect</span>.defineProperty(o, <span class="string">'c'</span>, &#123;</span><br><span class="line">  configurable: <span class="literal">true</span>,</span><br><span class="line">  enumerable: <span class="literal">true</span>,</span><br><span class="line">  get: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> cvalue;</span><br><span class="line">  &#125;,</span><br><span class="line">  set: <span class="function"><span class="keyword">function</span> (<span class="params">value</span>) </span>&#123;</span><br><span class="line">    cvalue = value</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(o) <span class="comment">// &#123; a: 1, b: 2, c: [Getter/Setter] &#125;</span></span><br><span class="line">o.a = <span class="number">2</span></span><br><span class="line">o.b = <span class="number">3</span></span><br><span class="line"><span class="built_in">console</span>.log(o) <span class="comment">// &#123; a: 2, b: 2, c: [Getter/Setter] &#125;</span></span><br><span class="line"><span class="keyword">delete</span> o.a</span><br><span class="line"><span class="keyword">delete</span> o.b</span><br><span class="line"><span class="built_in">console</span>.log(o) <span class="comment">// &#123; b: 2, c: [Getter/Setter] &#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(o.c) <span class="comment">// undefined</span></span><br><span class="line">o.c = <span class="string">'5'</span>;</span><br><span class="line"><span class="built_in">console</span>.log(o.c) <span class="comment">// 5</span></span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th></th>
<th>configurable(可配置性)</th>
<th>enumerable(可枚举性)</th>
<th>value(值)</th>
<th>writable(可写性)</th>
<th>get(获取值)</th>
<th>set(设置值)</th>
</tr>
</thead>
<tbody>
<tr>
<td>数据描述符</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
</tr>
<tr>
<td>存取描述符</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>Yes</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<h3 id="getOwnPropertyDescriptor-target-propertykey"><a href="#getOwnPropertyDescriptor-target-propertykey" class="headerlink" title="getOwnPropertyDescriptor(target, propertykey)"></a>getOwnPropertyDescriptor(target, propertykey)</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 接上例子</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Reflect</span>.getOwnPropertyDescriptor(o, <span class="string">'b'</span>)) <span class="comment">// &#123; value: 2, writable: false, enumerable: true, configurable: false&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Reflect</span>.getOwnPropertyDescriptor(o, <span class="string">'c'</span>)) <span class="comment">// &#123; get: [Function: get], set: [Function: set], enumerable: true, configurable: true &#125;</span></span><br></pre></td></tr></table></figure>
<h3 id="isExtensible-target"><a href="#isExtensible-target" class="headerlink" title="isExtensible(target)"></a>isExtensible(target)</h3><ul>
<li>返回一个布尔值，表示当前对象是否可扩展</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> f = <span class="built_in">Object</span>.freeze(&#123;<span class="attr">a</span>: <span class="number">1</span>&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Reflect</span>.isExtensible(f)) <span class="comment">// false</span></span><br></pre></td></tr></table></figure>
<h3 id="preventExtensions-target"><a href="#preventExtensions-target" class="headerlink" title="preventExtensions(target)"></a>preventExtensions(target)</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Reflect</span>.preventExtensions(o);</span><br><span class="line">o.test = <span class="string">'test'</span>; <span class="comment">// 无效，没有设置成功test</span></span><br></pre></td></tr></table></figure>
<h3 id="ownKeys-target"><a href="#ownKeys-target" class="headerlink" title="ownKeys(target)"></a>ownKeys(target)</h3><ul>
<li>获取对象的所有属性</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Reflect</span>.ownKeys(o)) <span class="comment">// ['b', 'c']</span></span><br></pre></td></tr></table></figure>
<h2 id="Proxy"><a href="#Proxy" class="headerlink" title="Proxy"></a>Proxy</h2><ol>
<li>用于修改某些操作的默认行为，等同于在语言层面做出修改，属于一种’元编程‘。</li>
<li>格式：<code>new Proxy(target, handler)</code>，<code>handler</code>对应<code>reflect</code>中的每个属性。</li>
</ol>
<h3 id="revocable"><a href="#revocable" class="headerlink" title="revocable"></a>revocable</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> target = &#123;&#125;;</span><br><span class="line"><span class="keyword">const</span> handler = &#123;&#125;;</span><br><span class="line"><span class="keyword">const</span> &#123;proxy, revoke&#125; = <span class="built_in">Proxy</span>.revocable(target, handler);</span><br><span class="line">proxy.foo = <span class="number">123</span>;</span><br><span class="line"><span class="built_in">console</span>.log(proxy.foo) <span class="comment">// 123</span></span><br><span class="line">revoke();</span><br><span class="line"><span class="built_in">console</span>.log(proxy.foo) <span class="comment">// TypeError: Cannot perform 'get' on a proxy that has been revoked</span></span><br></pre></td></tr></table></figure>
<h3 id="this"><a href="#this" class="headerlink" title="this"></a>this</h3><ul>
<li>在<code>Proxy</code>代理的情况下，目标对象内部的<code>this</code>关键字会指向<code>Proxy</code>代理。</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> target = &#123;</span><br><span class="line"> m: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">   <span class="built_in">console</span>.log(<span class="keyword">this</span> === proxy)</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> handler = &#123;&#125;;</span><br><span class="line"><span class="keyword">const</span> proxy = <span class="keyword">new</span> <span class="built_in">Proxy</span>(target, handler);</span><br><span class="line">target.m() <span class="comment">// false</span></span><br><span class="line">proxy.m() <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<h2 id="Generator"><a href="#Generator" class="headerlink" title="Generator"></a>Generator</h2><blockquote>
<p><a href="https://es6.ruanyifeng.com/#docs/generator" target="_blank" rel="noopener">参考资料</a></p>
</blockquote>
<h2 id="Decorator"><a href="#Decorator" class="headerlink" title="Decorator"></a>Decorator</h2><blockquote>
<p><a href="https://es6.ruanyifeng.com/#docs/decorator" target="_blank" rel="noopener">参考资料</a></p>
</blockquote>
<ol>
<li>修饰器只能修饰类或者类的方法。</li>
<li>默认参数和<code>Reflect.defineProperty</code>一样，可以在它外面包裹函数达到传递参数的目的。</li>
<li>不能用于函数的原因是存在函数提升，使得修饰器不能用于函数。而类是不会提升的，所以就没有这方面的问题。</li>
<li>修饰函数可以采用高阶函数的形式，就是把一个函数作为参数传入修饰器函数，这样就可以对函数的<code>prototype</code>进行修改了。</li>
<li>执行顺序：先从上到下按顺序执行获得最终需要执行的修饰器函数，然后从下到上执行修饰器函数。反正首先获取需要执行的修饰器函数，然后在一个个执行，这也是包裹修饰器函数达到传参的意图。</li>
</ol>
<h3 id="例子-1"><a href="#例子-1" class="headerlink" title="例子"></a>例子</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> logger = <span class="function">(<span class="params">target, key, desc</span>) =&gt;</span> &#123;</span><br><span class="line">  target.prototype.log = <span class="function"><span class="params">logInfo</span> =&gt;</span> <span class="built_in">console</span>.log(logInfo);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> move = <span class="function">(<span class="params">target, key, desc</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> returnValue = desc.value();</span><br><span class="line">  desc.value = <span class="function"><span class="params">()</span> =&gt;</span> returnValue + <span class="number">1</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> bigbig = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'bigbig'</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="function">(<span class="params">target, key, desc</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'big'</span>, target, key, desc);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> big = <span class="function">(<span class="params">target, key, desc</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'big'</span>, target, key, desc);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> smallsmall = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'smallsmall'</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="function">(<span class="params">target, key, desc</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'small'</span>, target, key, desc);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> small = <span class="function">(<span class="params">target, key, desc</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'small'</span>, target, key, desc);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">@logger</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Foo</span> </span>&#123;</span><br><span class="line">  getName() &#123;</span><br><span class="line">    <span class="keyword">this</span>.log(<span class="string">'this is getName.'</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  @move</span><br><span class="line">  @move</span><br><span class="line">  willMove(step) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  @bigbig()</span><br><span class="line">  <span class="comment">// @big</span></span><br><span class="line">  <span class="comment">// @small</span></span><br><span class="line">  @smallsmall()</span><br><span class="line">  apple() &#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> foo = <span class="keyword">new</span> Foo();</span><br></pre></td></tr></table></figure>
<h2 id="基础"><a href="#基础" class="headerlink" title="基础"></a>基础</h2><h3 id="类型"><a href="#类型" class="headerlink" title="类型"></a>类型</h3><blockquote>
<p><a href="https://mallow-fight.github.io/frontend/js/2_types&amp;grammar.html">参考</a></p>
</blockquote>
<h3 id="原型链-1"><a href="#原型链-1" class="headerlink" title="原型链"></a>原型链</h3><blockquote>
<p><a href="https://mallow-fight.github.io/special/1_%E5%8E%9F%E5%9E%8B.html">参考</a></p>
</blockquote>
<h3 id="事件队列"><a href="#事件队列" class="headerlink" title="事件队列"></a>事件队列</h3><blockquote>
<p><a href="https://segmentfault.com/a/1190000010913949" target="_blank" rel="noopener">参考</a><br><a href="https://segmentfault.com/a/1190000011198232" target="_blank" rel="noopener">参考</a><br><a href="http://www.ruanyifeng.com/blog/2014/10/event-loop.html" target="_blank" rel="noopener">参考</a></p>
</blockquote>
<h3 id="闭包"><a href="#闭包" class="headerlink" title="闭包"></a>闭包</h3><blockquote>
<p><a href="https://mallow-fight.github.io/frontend/js/3_scope&amp;closures.html">参考</a></p>
</blockquote>
<h3 id="上下文"><a href="#上下文" class="headerlink" title="上下文"></a>上下文</h3><blockquote>
<p><a href="https://mallow-fight.github.io/frontend/js/4_this&amp;prototype.html">参考</a></p>
</blockquote>
<h2 id="分类"><a href="#分类" class="headerlink" title="分类"></a>分类</h2><h3 id="es5"><a href="#es5" class="headerlink" title="es5"></a>es5</h3><ul>
<li>通用的js版本</li>
</ul>
<h3 id="es6"><a href="#es6" class="headerlink" title="es6"></a>es6</h3><ul>
<li>下一代高效js版本</li>
</ul>
<h2 id="转译工具"><a href="#转译工具" class="headerlink" title="转译工具"></a>转译工具</h2><h3 id="babel"><a href="#babel" class="headerlink" title="babel"></a>babel</h3><ul>
<li>将es6翻译成es5</li>
<li>解决了浏览器不认识es6或者es7的问题</li>
</ul>
<h2 id="检测类型"><a href="#检测类型" class="headerlink" title="检测类型"></a>检测类型</h2><ul>
<li>只能使用<code>Object.prototype.toString.call(var)</code>，因为<code>Object.toString</code>和它不是一个函数，其他的构造函数如<code>Array</code>等继承的是它们自己定义的函数。</li>
<li>在toString方法被调用时,会执行下面的操作步骤:</li>
<li>es5<ol>
<li>获取this对象的[[class]]属性的值.</li>
<li>计算出三个字符串”[object “, 第一步的操作结果Result(1), 以及 “]”连接后的新字符串.</li>
<li>返回第二步的操作结果Result(2).</li>
</ol>
</li>
<li>es6<ol>
<li>[[class]]内部属性没有了，取而代之的是另一个内部属性[[NativeBrand]]（该属性的值对应一个标志值，可以用来区分原生对象的类型）</li>
</ol>
</li>
</ul>
<h2 id="隐式绑定"><a href="#隐式绑定" class="headerlink" title="隐式绑定"></a>隐式绑定</h2><ul>
<li>上下文只会取上一层，不会一直往上取。<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> a = &#123;</span><br><span class="line"> b: &#123;</span><br><span class="line">   c() &#123;</span><br><span class="line">     <span class="built_in">console</span>.log(<span class="keyword">this</span>) <span class="comment">// &#123; c: [Function: c], d: 2 &#125;</span></span><br><span class="line">     <span class="built_in">console</span>.log(<span class="keyword">this</span>.e) <span class="comment">// undefined</span></span><br><span class="line">   &#125;,</span><br><span class="line">   d: <span class="number">2</span></span><br><span class="line"> &#125;,</span><br><span class="line"> e: <span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line">a.b.c()</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="柯里化"><a href="#柯里化" class="headerlink" title="柯里化"></a>柯里化</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">num1</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 也可以挂载在this上，这里的this就是window，可以事先bind一个this</span></span><br><span class="line">  <span class="keyword">let</span> total = num1;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">sum</span>(<span class="params">a</span>) </span>&#123;</span><br><span class="line">    total += a;</span><br><span class="line">    <span class="keyword">return</span> sum;</span><br><span class="line">  &#125;</span><br><span class="line">  sum.getTotal = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> total;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> sum;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> sum = add(<span class="number">1</span>)(<span class="number">2</span>)(<span class="number">3</span>)(<span class="number">4</span>)</span><br><span class="line"><span class="built_in">console</span>.log(sum.getTotal())</span><br><span class="line"><span class="comment">// 打印的时候会自动调用函数的toString方法</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">test.toString = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">'haha'</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(test) <span class="comment">// haha</span></span><br></pre></td></tr></table></figure>
<h2 id="深-浅拷贝"><a href="#深-浅拷贝" class="headerlink" title="深/浅拷贝"></a>深/浅拷贝</h2><blockquote>
<p><a href="https://segmentfault.com/a/1190000016672263" target="_blank" rel="noopener">wiki</a></p>
</blockquote>

  <div class="guide-links">
    
    
      <span>← <a href="/v3/client/2-css.html">css</a></span>
    
    
    
      <span style="float: right;"><a href="/v3/client/4-browser.html">浏览器</a> →</span>
    
  </div>
  <div class="footer">
    发现错误？想参与编辑？
    <a href="https://github.com/mallow-fight/blog/tree/master/source/v3/client/3-js.md" target="_blank">
      在 GitHub 上编辑此页！
    </a>
    
    <span>更新于：2019-05-23 14:05:31</span>
  </div>
</div>


<!-- <div id="disqus_thread"></div>
<script>
  // it seems slowly page, so i annotation it.
  // disqus评论系统
  /**
  *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
  *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
  var disqus_config = function () {
    this.page.url = 'https://mallow-fight.github.io/';  // Replace PAGE_URL with your page's canonical URL variable
    this.page.identifier = 'https://mallow-fight.github.io/'; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
  };
  (function() { // DON'T EDIT BELOW THIS LINE
  var d = document, s = d.createElement('script');
  s.src = 'https://mallow-blog.disqus.com/embed.js';
  s.setAttribute('data-timestamp', +new Date());
  (d.head || d.body).appendChild(s);
  })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript> -->
    </div>
    <script src="/js/smooth-scroll.min.js"></script>
  
  <!-- main custom script for sidebars, version selects etc. -->
  <script src="/js/css.escape.js"></script>
  <script src="/js/common.js"></script>
  <!-- search -->
  <link href="//cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css" rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="/css/search.css">
  <script src="/js/docsearch.js"></script>
  <script>
  [
    '#search-query-nav',
    '#search-query-sidebar',
    '#search-query-menu'
  ].forEach(function (selector) {
    if (!document.querySelector(selector)) return
    docsearch({
      appId: 'FKZQZEMOI4',
      apiKey: '82fdcfac2e888595cb2807aa60aaad58',
      indexName: 'prod_blog',
      inputSelector: selector
    })
  })
  </script>
  <!-- fastclick -->
  <script src="//cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.min.js"></script>
</body>
</html>