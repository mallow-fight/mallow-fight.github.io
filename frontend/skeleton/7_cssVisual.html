

<!DOCTYPE html>
<html lang="en">
<head>
  <title>CSS的可视化格式模型 - mallow</title>
  <meta charset="utf-8">
  <meta name="description" content="mallow's blog.">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

  <meta property="og:type" content="article">
  <meta property="og:title" content="CSS的可视化格式模型 — mallow">
  <meta property="og:description" content="mallow's blog.">
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-120215204-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-120215204-1');
  </script>
  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
  <link rel="icon" href="/images/logo.png" type="image/png">
  <!-- main page styles -->
  <link rel="stylesheet" href="/css/page.css">
  <!-- import vue from there so that you can use vue in markdown -->
  <script src="/js/vue.min.js"></script>
  <script>window.PAGE_TYPE = "skeleton"</script>
</head>
<body class="docs">
  <div id="mobile-bar" >
    <a class="menu-button"></a>
    <a class="logo" href="/"></a>
  </div>
  <div id="header">
  <a id="logo" href="/">
    <img src="/images/logo.png">
    <span>Mallow</span>
  </a>
  <ul id="nav">
    <li>
  <form id="search-form">
    <input type="text" id="search-query-nav" class="search-query st-default-search-input">
  </form>
</li>
<li class="nav-dropdown-container learn">
  <a class="nav-link">软件工程化</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li><a href="/software/engineering.html" class="nav-link">概念&实践</a></li>
  </ul>
</li>

<li class="nav-dropdown-container learn">
  <a class="nav-link">算法</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li><a href="/arithmetic/1_lintcode.html" class="nav-link">概念&实践</a></li>
  </ul>
</li>
<li class="nav-dropdown-container learn">
  <a class="nav-link">前端</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li><a href="/frontend/skeleton/1_skeleton.html" class="nav-link">skeleton</a></li>
    <li><a href="/frontend/html/1_define.html" class="nav-link">html</a></li>
    <li><a href="/frontend/css/1_define.html" class="nav-link">css</a></li>
    <li><a href="/frontend/js/1_enter&going.html" class="nav-link">javascript</a></li>
    <li><a href="/frontend/framework/1_vue.html" class="nav-link">framework</a></li>
    <li><a href="/frontend/browser/1_safe.html" class="nav-link">browser</a></li>
    <li><a href="/frontend/important/1_conclude.html" class="nav-link">conclude</a></li>
  </ul>
</li>
  
<li class="nav-dropdown-container learn">
  <a class="nav-link">后端</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li><a href="/backend/node/note.html" class="nav-link">node</a></li>
    <li><a href="/backend/http/1_http.html" class="nav-link">http</a></li>
    <li><a href="/backend/java/core.html" class="nav-link">java</a></li>
    <li><a href="/backend/database/1_mysql.html" class="nav-link">database</a></li>
  </ul>
</li>
<li class="nav-dropdown-container learn">
  <a class="nav-link">读书</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li><a href="/books/memory/1_利玛窦的记忆宫殿.html" class="nav-link">记忆学</a></li>
    <li><a href="/books/computer/1_构建高性能web网站.html" class="nav-link">计算机</a></li>
    <li><a href="/books/history/资治通鉴/1_周纪一.html" class="nav-link">历史</a></li>
    <li><a href="/books/economics/1_国富论.html" class="nav-link">经济</a></li>
  </ul>
</li>
<li class="nav-dropdown-container learn">
  <a href="/special/1_原型.html" class="nav-link">专题</a>
</li>

  </ul>
</div>
  
    <div id="main" class="fix-sidebar">
        <div class="guide-links">
  
  
    <span style="float: right;"><a style="color: green;" href="/frontend/skeleton/8_analysisJs.html">JS引擎解析过程</a> →</span>
  
  
  
    <span style="float: right; margin-right: 30px;">← <a style="color: goldenrod;" href="/frontend/skeleton/6_analysisFront.html">解析页面流程</a></span>
  
</div>

  <div class="sidebar">
  <div class="sidebar-inner">
    <h3>当前位置：skeleton</h3>
    <div class="list">
      <ul class="menu-root">
  
    
      <li>
        <a href="/frontend/skeleton/1_skeleton.html" class="sidebar-link">
          前端骨架
        </a>
      </li>
      
    
      <li>
        <a href="/frontend/skeleton/2_acceptUrl.html" class="sidebar-link">
          接受URL～开启网络请求线程
        </a>
      </li>
      
    
      <li>
        <a href="/frontend/skeleton/3_sendHttp.html" class="sidebar-link">
          开启网络线程 ~ 发出http请求
        </a>
      </li>
      
    
      <li>
        <a href="/frontend/skeleton/4_frontAndBack.html" class="sidebar-link">
          后台和前台的http交互
        </a>
      </li>
      
    
      <li>
        <a href="/frontend/skeleton/5_storage.html" class="sidebar-link">
          http缓存
        </a>
      </li>
      
    
      <li>
        <a href="/frontend/skeleton/6_analysisFront.html" class="sidebar-link">
          解析页面流程
        </a>
      </li>
      
    
      <li>
        <a href="/frontend/skeleton/7_cssVisual.html" class="sidebar-link current">
          CSS的可视化格式模型
        </a>
      </li>
      
    
      <li>
        <a href="/frontend/skeleton/8_analysisJs.html" class="sidebar-link">
          JS引擎解析过程
        </a>
      </li>
      
    
      <li>
        <a href="/frontend/skeleton/9_questions.html" class="sidebar-link">
          问题
        </a>
      </li>
      
</ul>
    </div>
    <h3>浏览其它</h3>
    <ul class="main-menu">
      <li>
  <form id="search-form">
    <input type="text" id="search-query-sidebar" class="search-query st-default-search-input">
  </form>
</li>
<li class="nav-dropdown-container learn">
  <a class="nav-link">软件工程化</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li><a href="/software/engineering.html" class="nav-link">概念&实践</a></li>
  </ul>
</li>

<li class="nav-dropdown-container learn">
  <a class="nav-link">算法</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li><a href="/arithmetic/1_lintcode.html" class="nav-link">概念&实践</a></li>
  </ul>
</li>
<li class="nav-dropdown-container learn">
  <a class="nav-link">前端</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li><a href="/frontend/skeleton/1_skeleton.html" class="nav-link">skeleton</a></li>
    <li><a href="/frontend/html/1_define.html" class="nav-link">html</a></li>
    <li><a href="/frontend/css/1_define.html" class="nav-link">css</a></li>
    <li><a href="/frontend/js/1_enter&going.html" class="nav-link">javascript</a></li>
    <li><a href="/frontend/framework/1_vue.html" class="nav-link">framework</a></li>
    <li><a href="/frontend/browser/1_safe.html" class="nav-link">browser</a></li>
    <li><a href="/frontend/important/1_conclude.html" class="nav-link">conclude</a></li>
  </ul>
</li>
  
<li class="nav-dropdown-container learn">
  <a class="nav-link">后端</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li><a href="/backend/node/note.html" class="nav-link">node</a></li>
    <li><a href="/backend/http/1_http.html" class="nav-link">http</a></li>
    <li><a href="/backend/java/core.html" class="nav-link">java</a></li>
    <li><a href="/backend/database/1_mysql.html" class="nav-link">database</a></li>
  </ul>
</li>
<li class="nav-dropdown-container learn">
  <a class="nav-link">读书</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li><a href="/books/memory/1_利玛窦的记忆宫殿.html" class="nav-link">记忆学</a></li>
    <li><a href="/books/computer/1_构建高性能web网站.html" class="nav-link">计算机</a></li>
    <li><a href="/books/history/资治通鉴/1_周纪一.html" class="nav-link">历史</a></li>
    <li><a href="/books/economics/1_国富论.html" class="nav-link">经济</a></li>
  </ul>
</li>
<li class="nav-dropdown-container learn">
  <a href="/special/1_原型.html" class="nav-link">专题</a>
</li>

    </ul>
  </div>
</div>


<div class="content skeleton with-sidebar ">
  <ul class="menu-root">
  
</ul>
  
    <h1>CSS的可视化格式模型</h1>
  
  <blockquote>
<p><a href="http://bbs.csdn.net/topics/340204423" target="_blank" rel="noopener">参考资料 - 更详细的可视化格式模型</a></p>
</blockquote>
<p><strong>规定了浏览器在页面中如何处理文档数</strong></p>
<ul>
<li><p>CSS中规定每一个元素都有自己的盒子模型（相当于规定了这个元素如何显示）</p>
</li>
<li><p>可视化格式模型就是把这些盒子按照规则摆放到页面上，也就是如何布局</p>
</li>
<li><p>盒子模型规定了怎么在页面里摆放盒子，盒子的相互作用等</p>
</li>
</ul>
<p><strong>CSS有三种定位机制：普通流，浮动，绝对定位，如无特别提及，下文中都是针对普通流中的</strong></p>
<h3 id="包含块"><a href="#包含块" class="headerlink" title="包含块"></a>包含块</h3><p>一个元素的box定位和尺寸，会与某一矩形框有关，这个框称之为包含块。<br>元素会为它的子孙元素创建包含块，但是，并不是说元素的包含块就是它的父元素，元素的包含块与它的祖先元素的样式等有关系。</p>
<ul>
<li><p>根元素是最顶端的元素，它没有父节点，包含块就是初始包含块</p>
</li>
<li><p>static和relative的包含块由它最近的块级、单元格或者行内祖先元素的内容框创建</p>
</li>
<li><p>fixed的包含块是当前可视窗口</p>
</li>
<li><p>absolute的包含块由它最近的position属性为absolute、relative或fixed的祖先元素创建</p>
<ul>
<li><p>如果祖先元素是行内元素，则包含块取决于其祖先元素的direction特性</p>
</li>
<li><p>如果祖先元素不是行内元素，那么包含块的区域应该是祖先元素的内边距边界</p>
</li>
</ul>
</li>
</ul>
<h3 id="控制框"><a href="#控制框" class="headerlink" title="控制框"></a>控制框</h3><ul>
<li><p>块框</p>
<ul>
<li><p>块级元素会生成一个块框，块框会占据一整行，用来包含子box和生成的内容</p>
</li>
<li><p>块框同时也是一个块包含框，里面要么只包含块框，要么只包含行内框，如果块框内部有块级元素也有行内元素，那么行内元素会被匿名块框包围</p>
</li>
</ul>
</li>
</ul>
<blockquote>
<p>如果一个块框在其中包含另外一个块框，那么我们强迫它只能包含块框，因此其它文本内容生成出来的都是匿名块框（而不是匿名行内框）</p>
</blockquote>
<ul>
<li><p>行内框</p>
<ul>
<li><p>一个行内元素生成一个行内框</p>
</li>
<li><p>行内元素能排在一行，允许左右有其它元素</p>
</li>
</ul>
</li>
<li><p>display属性的影响</p>
<ul>
<li><p>block：元素生成一个块框</p>
</li>
<li><p>inline：元素生成一个或多个的行内框</p>
</li>
<li><p>inline-block：元素产生一个行内级块框，行内块框的内部会被当作块框来格式化，而此元素本身会被当作行内级框来格式化（这也是为什么会产生BFC）</p>
</li>
<li><p>none：不生成框，不在格式化结构中，visibility：hidden则会产生一个不可见的框</p>
</li>
</ul>
</li>
<li><p>总结</p>
<ul>
<li><p>如果一个框里，有一个块级元素，那么这个框里的内容都会被当作块框来进行格式化，因为只要出现了块级元素，就会将里面的内容分成几块，每一块独占一行（出现行内可以用匿名块框解决）</p>
</li>
<li><p>如果一个框里，没有任何块级元素，那么这个框里的内容会被当成行内框来格式化，因为里面的内容会被当成行内框来格式化，因为里面的内容是按照顺序成行的排列</p>
</li>
</ul>
</li>
</ul>
<h3 id="BFC"><a href="#BFC" class="headerlink" title="BFC"></a>BFC</h3><p>全称：Block Formatting Context</p>
<ul>
<li><p>定义框内部的元素渲染规则</p>
<ul>
<li><p>FC像是一个大箱子，里面装有很多元素</p>
</li>
<li><p>箱子可以隔开里面的元素和外面的元素（所以外部并不会影响FC内部的渲染）</p>
</li>
<li><p>内部的规则可以是：如何定位，宽高计算，margin折叠等</p>
</li>
</ul>
</li>
<li><p>不同类型的框参与的FC类型不同，譬如块级框对应BFC，行内框对应IFC：并不是说所有框都会产生FC，而是符合特定条件才会产生，只有产生了对应的FC后才会应用对应的渲染规则，规则：</p>
<ul>
<li><p>在块格式化上下文中</p>
</li>
<li><p>每一个元素左外边与包含块的左边相接触（对于从右到左的格式化，右外边接触右边），即使存在浮动也是如此（所以浮动元素正常会直接贴近它的包含块的左边，与普通元素重合），除非这个元素也创建了一个新的BFC</p>
</li>
</ul>
</li>
<li><p>特点</p>
<ul>
<li><p>内部box在垂直方向，一个接一个的放置</p>
</li>
<li><p>box的垂直方向由margin决定，属于同一个BFC的两个box间的margin会重叠</p>
</li>
<li><p>BFC区域不会与float box重叠（可用于排版）</p>
</li>
<li><p>BFC就是页面上的一个隔离的独立容器，容器里面的子元素不会影响到外面的元素，反之也如此</p>
</li>
<li><p>计算BFC的高度时，浮动元素也参与计算（不会浮动塌陷）</p>
</li>
</ul>
</li>
<li><p>如何触发BFC</p>
<ul>
<li><p>根元素</p>
</li>
<li><p>float属性不为none</p>
</li>
<li><p>position为absolute或fixed</p>
</li>
<li><p>display为inline-block, flex, inline-flex，table，table-cell，table-caption</p>
</li>
<li><p>overflow不为visible</p>
</li>
</ul>
</li>
</ul>
<h3 id="IFC"><a href="#IFC" class="headerlink" title="IFC"></a>IFC</h3><ul>
<li><p>规则</p>
<ul>
<li><p>在行内格式化上下文中</p>
</li>
<li><p>框一个接一个地水平排列，起点是包含块的顶部</p>
</li>
<li><p>水平方向上的 margin，border 和 padding 在框之间得到保留</p>
</li>
<li><p>框在垂直方向上可以以不同的方式对齐：它们的顶部或底部对齐，或根据其中文字的基线对齐</p>
</li>
</ul>
</li>
<li><p>行框</p>
<ul>
<li><p>包含那些框的长方形区域，会形成一行，叫做行框：行框的宽度由它的包含块和其中的浮动元素决定，高度的确定由行高度计算规则决定</p>
</li>
<li><p>规则：</p>
<ul>
<li><p>如果几个行内框在水平方向无法放入一个行框内，它们可以分配在两个或多个垂直堆叠的行框中（即行内框的分割）</p>
</li>
<li><p>行框在堆叠时没有垂直方向上的分割且永不重叠</p>
</li>
<li><p>行框的高度总是足够容纳所包含的所有框。不过，它可能高于它包含的最高的框（例如，框对齐会引起基线对齐）</p>
</li>
<li><p>行框的左边接触到其包含块的左边，右边接触到其包含块的右边。</p>
</li>
<li><p>浮动元素可能会处于包含块边缘和行框边缘之间</p>
</li>
<li><p>尽管在相同的行内格式化上下文中的行框通常拥有相同的宽度（包含块的宽度），它们可能会因浮动元素缩短了可用宽度，而在宽度上发生变化</p>
</li>
<li><p>同一行内格式化上下文中的行框通常高度不一样（如，一行包含了一个高的图形，而其它行只包含文本）</p>
</li>
<li><p>当一行中行内框宽度的总和小于包含它们的行框的宽，它们在水平方向上的对齐，取决于 <code>text-align</code> 特性</p>
</li>
<li><p>空的行内框应该被忽略</p>
</li>
<li><p>即不包含文本，保留空白符，margin/padding/border非0的行内元素，以及其他常规流中的内容(比如，图片，inline blocks 和 inline tables)，并且不是以换行结束的行框，必须被当作零高度行框对待</p>
</li>
</ul>
</li>
</ul>
</li>
<li><p>总结</p>
<ul>
<li><p>行内元素总是会应用IFC渲染规则</p>
</li>
<li><p>行内元素会应用IFC规则渲染，譬如text-align可以用来居中</p>
</li>
<li><p>块框内部，对于文本这类的匿名元素，会产生匿名行框包围，而行框内部就应用IFC渲染规则</p>
</li>
<li><p>行内框内部，对于那些行内元素，一样应用IFC渲染规则</p>
</li>
<li><p>另外，inline-block，会在元素外层产生IFC（所以这个元素是可以通过text-align水平居中的），当然，它内部则按照BFC规则渲染</p>
</li>
</ul>
</li>
</ul>

  <div class="guide-links">
    
    
      <span>← <a href="/frontend/skeleton/6_analysisFront.html">解析页面流程</a></span>
    
    
    
      <span style="float: right;"><a href="/frontend/skeleton/8_analysisJs.html">JS引擎解析过程</a> →</span>
    
  </div>
  <div class="footer">
    发现错误？想参与编辑？
    <a href="https://github.com/mallow-fight/blog/tree/master/source/frontend/skeleton/7_cssVisual.md" target="_blank">
      在 GitHub 上编辑此页！
    </a>
    
    <span>更新于：2018-09-13 14:09:22</span>
  </div>
</div>


<!-- <div id="disqus_thread"></div>
<script>
  // it seems slowly page, so i annotation it.
  // disqus评论系统
  /**
  *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
  *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
  var disqus_config = function () {
    this.page.url = 'https://mallow-fight.github.io/';  // Replace PAGE_URL with your page's canonical URL variable
    this.page.identifier = 'https://mallow-fight.github.io/'; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
  };
  (function() { // DON'T EDIT BELOW THIS LINE
  var d = document, s = d.createElement('script');
  s.src = 'https://mallow-blog.disqus.com/embed.js';
  s.setAttribute('data-timestamp', +new Date());
  (d.head || d.body).appendChild(s);
  })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript> -->
    </div>
    <script src="/js/smooth-scroll.min.js"></script>
  
  <!-- main custom script for sidebars, version selects etc. -->
  <script src="/js/css.escape.js"></script>
  <script src="/js/common.js"></script>
  <!-- search -->
  <link href="//cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css" rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="/css/search.css">
  <script src="/js/docsearch.js"></script>
  <script>
  [
    '#search-query-nav',
    '#search-query-sidebar',
    '#search-query-menu'
  ].forEach(function (selector) {
    if (!document.querySelector(selector)) return
    docsearch({
      appId: 'FKZQZEMOI4',
      apiKey: '82fdcfac2e888595cb2807aa60aaad58',
      indexName: 'prod_blog',
      inputSelector: selector
    })
  })
  </script>
  <!-- fastclick -->
  <script src="//cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.min.js"></script>
</body>
</html>